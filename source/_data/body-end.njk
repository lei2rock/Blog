{### 锚点定位 ###}
{% if page.comments or post.comments %}
  <script type="text/javascript">
    if (window.location.hash) {
      var checkExist = setInterval(function () {
        if ($(window.location.hash).length) {
          $('html, body').animate({
            scrollTop: $(window.location.hash).offset().top - 90
          }, 1000);
          clearInterval(checkExist);
        }
      }, 100);
    }
  </script>
{% endif %}

{### 友链生成 ###}
<script{{ pjax }} type="text/javascript">
  //jquery selector
  var $linkLists = $("[name='linklist']");
  if($linkLists.length != 0){
    var j = -1;
    for	(var i = 0; i < $linkLists.length; i++) {
      var listPath = $linkLists[i].getAttribute('src');
      //使用 getJSON 读取 JSON 文件中的数据
      $.getJSON(listPath, function(data) {
        j++;
        //存储数据的变量 
        var li = "";
        //清空内容 
        $linkLists.eq(j).empty();
        //将获取到的 json 格式数据遍历到 div 中
        $.each(data, function(infoIndex, info) {
          if(info['label']) { 
            info['label'] = '<span class="label">' + info['label'] + '</span>';
          } else {
            info['label'] = "";
          }
          li += '<div class="favlink-grid-container">';
          li += '<img class="favlink-grid-image" src="' + info['logo'] + '">';
          li += '<p>' + info['title'] + info['label'] + '</p>';
          li += '<p>' + info['intro'] + '</p>';
          li += '<a href="' + info['url'] + '" rel="noopener" target="_blank" data-pjax-state=""></a>';
          li += '</div>';
        })
        //显示处理后的数据 
        $linkLists.eq(j).html(li);
      })
    }
  }
</script>